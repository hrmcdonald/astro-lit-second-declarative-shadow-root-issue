import{i as p,D as d,S as m,c as a,s as g,a as f,_ as e,n as o,r,e as h,l as y,o as n,d as c,g as u}from"./chunk.BDXXLFJI.Wz8REFjk.js";import{x as w}from"./directive.qvJfFQ74.js";import{a as l}from"./anime.es.OMgaynFP.js";var v=p`:host{display:grid;grid-template-rows:0fr;will-change:grid-template-rows,opacity}.content{overflow:hidden}`,b=0,t=class extends d(m(u)){constructor(){super(),this.id=`mte-collapse--${b++}`,this.opened=!1,this.withFade=!1,this.showOverflow=!1,this.withoutAnimation=!1,this.animationDuration=a.animation.transitionDurationJs.short*1e3,this.doShowOverflow=!1,this.firstUpdateComplete=!1,this.animationDone=()=>{this.opacityAnimationRef?.remove(),this.gridAnimationRef?.remove(),this.opacityAnimationRef=null,this.gridAnimationRef=null,this.visibility=this.opened?"inherit":"hidden",this.showOverflow&&this.opened&&(this.overflow="visible")},this.toggle=this.toggle.bind(this)}set triggerElement(i){i&&this._triggerElement!==i&&(this._triggerElement?.removeEventListener("click",this.toggle),this._triggerElement?.removeAttribute("aria-controls"),this._triggerElement=i,this._triggerElement.setAttribute("aria-controls",this.id),this._triggerElement.addEventListener("click",this.toggle),this.updateTriggerA11y())}get triggerElement(){return this._triggerElement}handleOpenedChanged(){if(!this.firstUpdateComplete)this.opacity=this.opened?"1":"0",this.visibility=this.opened?"inherit":"hidden",this.initialGridTemplateRows=this.opened?"1fr":"0fr";else if(this.opened&&(this.visibility="inherit"),this.style.overflow="hidden",this.updateTriggerA11y(),this.withoutAnimation)this.gridAnimationState=null,this.opacity=this.opened?"1":this.withFade?"0":"1",this.style.gridTemplateRows=this.opened?"1fr":"0fr",this.animationDone();else{this.opacityAnimationRef?.pause(),this.gridAnimationRef?.pause();const i=a.animation.timingFunctionJs.standard,s=`cubicBezier(${i[0]}, ${i[1]}, ${i[2]}, ${i[3]})`;this.opacityAnimationRef=l({targets:this,opacity:this.withFade?this.opened?1:0:[1,1],duration:this.animationDuration,easing:s,complete:()=>{this.animationDone()}}),this.gridAnimationState??={rows:this.opened?0:1},this.gridAnimationRef=l({targets:this.gridAnimationState,rows:this.opened?[this.gridAnimationState.rows,1]:[this.gridAnimationState.rows,0],duration:this.animationDuration,easing:s,update:()=>{this.style.gridTemplateRows=`${this.gridAnimationState.rows}fr`}})}}handleShowOverflow(i){this.firstUpdateComplete?i.has("showOverflow")&&!i.has("opened")&&(this.overflow=this.showOverflow?"visible":"hidden"):this.opened&&this.showOverflow&&(this.overflow="visible")}handleTriggerChange(i){const s=this.triggerRoot??document;this.triggerElement=s.getElementById(this.triggerId)}firstUpdated(i){super.firstUpdated(i),this.firstUpdateComplete=!0}updateTriggerA11y(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded",this.opened?"true":"false")}disconnectedCallback(){super.disconnectedCallback(),this.opacityAnimationRef?.remove(),this.gridAnimationRef?.remove()}updateInstanceStyles(i){super.updateInstanceStyles(i),(i.has("opacity")||i.has("visibility")||i.has("overflow")||i.has("initialGridTemplateRows"))&&this.setInstanceStyle("collapse",g(this.instanceStyleSelectorRoot),{opacity:this.opacity,visibility:this.visibility,overflow:this.overflow,gridTemplateRows:this.firstUpdateComplete?null:this.initialGridTemplateRows})}render(){return w`${this.instanceStyles}<div class="content" part="content"><slot></slot></div>`}toggle(){this.opened?this.close():this.open()}open(){this.disabled||(this.opened=!0,this._onOpen.emit(null,{bubbles:!1}))}close(){this.disabled||(this.opened=!1,this._onClose.emit(null,{bubbles:!1}))}};t.styles=[f,v];e([o({reflect:!0})],t.prototype,"id",2);e([o({type:Boolean,reflect:!0})],t.prototype,"opened",2);e([o({type:Boolean,reflect:!0})],t.prototype,"withFade",2);e([o({type:Boolean,reflect:!0})],t.prototype,"showOverflow",2);e([o({type:Boolean,reflect:!0})],t.prototype,"withoutAnimation",2);e([o({type:Number})],t.prototype,"animationDuration",2);e([o({type:Boolean,reflect:!0})],t.prototype,"doShowOverflow",2);e([o({reflect:!0})],t.prototype,"triggerId",2);e([o({type:Object})],t.prototype,"triggerRoot",2);e([o({type:Object})],t.prototype,"triggerElement",1);e([r()],t.prototype,"opacity",2);e([r()],t.prototype,"visibility",2);e([r()],t.prototype,"overflow",2);e([r()],t.prototype,"initialGridTemplateRows",2);e([h()],t.prototype,"_onOpen",2);e([h()],t.prototype,"_onClose",2);e([y(".content")],t.prototype,"contentElem",2);e([n("opened",{on:"both"})],t.prototype,"handleOpenedChanged",1);e([n(["opened","showOverflow"],{on:"both"})],t.prototype,"handleShowOverflow",1);e([n(["triggerId","triggerRoot"])],t.prototype,"handleTriggerChange",1);t=e([c("mte-collapse")],t);export{t as MteCollapse};
