import{c as v,a as L,s as E,o as w,f as P,b as T,h as x,d as C,e as u}from"./floating-ui.dom.ZqocShws.js";import{i as O,D as U,S as D,c as I,j as k,P as R,a as _,_ as e,n as i,r as s,e as r,l as c,o,d as z,g as B}from"./chunk.BDXXLFJI.Wz8REFjk.js";import{x as H}from"./directive.qvJfFQ74.js";import{a as m}from"./anime.es.OMgaynFP.js";var S=O`:host{--color:var(--mte-light);--background:var(--mte-dark);--z-index:var(--mte-z-index-20);--radius:var(--mte-border-radius-xl);--padding-x:var(--mte-space-md);--padding-y:var(--mte-space-sm);pointer-events:auto}.tooltip{font-family:var(--mte-font-family-sans);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:var(--radius);color:var(--color);display:none;font-size:var(--mte-font-set-caption-font-size);font-weight:var(--mte-font-set-caption-font-weight);line-height:var(--mte-font-set-caption-line-height);max-width:250px;opacity:0;padding:var(--padding-y) var(--padding-x);position:fixed;text-decoration:inherit;text-overflow:ellipsis;text-transform:inherit;z-index:var(--z-index)}.arrow,.tooltip{background:var(--background)}.arrow{height:10px;position:absolute;transform:rotate(45deg);width:10px}`,N=["MTE-ICON-BUTTON"],$=0,t=class extends U(D(B)){constructor(){super(),this.id=`mte-tooltip--${$++}`,this.position="top",this.placement="center",this.openDelay=0,this.closeDelay=0,this.role="tooltip",this.ariaHidden="true",this.ariaLive="off",this.triggerOn="hover",this.withoutPortal=!1,this.animationDuration=I.animation.transitionDurationJs.short*1e3,this.asAriaLabel=!1,this.withoutAutoLabel=!1,this.opened=!1,this.assumeLabel=!1,this.portalAdapter=k,this.withoutA11y=!1,this.visible=!1,this.renderedPosition=null,this.offset=8,this.cleanupUpdateListeners=null,this.portalController=new R(this),this.updatePosition=()=>{if(this.targetElement){const[a,l]=v(this.position,this.placement);L(this.targetElement,this.tooltipElem,{strategy:"fixed",placement:a,middleware:[E({padding:this.offset}),w(this.offset),P({fallbackPlacements:l}),T({element:this.arrowElem}),x()]}).then(({x:f,y:b,placement:n,middlewareData:p})=>{this.renderedPosition=n;const{referenceHidden:g}=p.hide;Object.assign(this.tooltipElem.style,{left:`${f}px`,top:`${b}px`,visibility:g?"hidden":"visible"});const{x:h,y:d,centerOffset:y}=p.arrow,A={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];y!==0?this.arrowElem.style.opacity="0":Object.assign(this.arrowElem.style,{left:h!=null?`${h}px`:"",top:d!=null?`${d}px`:"",right:"",bottom:"",opacity:1,[A]:"-3px"})})}},this.open=this.open.bind(this),this.close=this.close.bind(this)}handleAutoLabelChange(){this.updateLabelAssumption()}handleTriggerOnChange(){this._onTriggerChange.emit(this.triggerOn)}handleA11yChange(){this.updateTargetAriaIds()}handleDisabledChange(){this.visible&&this.close()}handlePositionChange(){this.opened&&this.cleanupUpdateListeners&&this.updatePosition(),this.renderedPosition=null}firstUpdated(){this.opened||(this.ariaHidden="true",this.ariaLive="off"),this.updateTargetAriaIds()}disconnectedCallback(){super.disconnectedCallback(),this.cleanupUpdateListeners?.(),this.cleanupUpdateListeners=null,this.openAnimationRef?.remove(),this.closeAnimationRef?.remove()}toggle(){return this.visible?this.close():this.open()}open(){return new Promise(a=>{!this.disabled&&!this.opened&&this.targetElement&&(this.closeTimeoutId&&(clearTimeout(this.closeTimeoutId),this.closeTimeoutId=null),this.openTimeoutId=setTimeout(()=>{(this.withoutPortal?Promise.resolve():this.portalController.appendToStack(this,{withInertBackdrop:!0,portalAdapter:this.portalAdapter})).then(()=>{this.cleanupUpdateListeners||setTimeout(()=>{this.cleanupUpdateListeners=C(this.targetElement,this.tooltipElem,this.updatePosition)}),this.opened||this._onOpen.emit(null,{bubbles:!1}),this.opened=!0,this.ariaHidden=this.asAriaLabel||this.assumeLabel?"true":"false",this.ariaLive=this.asAriaLabel||this.assumeLabel?"off":"polite",this.openTimeoutId=null,this.tooltipElem?(this.tooltipElem.style.display="block",this.closeAnimationRef?.pause(),this.openAnimationRef?.remove(),this.openAnimationRef=m({targets:this.tooltipElem,...u(this.renderedPosition,{fallbackPosition:this.position,fallbackPlacement:this.placement,action:"open",scaleX:.9}),opacity:{value:[0,1],easing:"linear",duration:this.animationDuration/2},easing:"easeOutElastic",duration:this.animationDuration,complete:()=>{a()}})):a()})},this.openDelay))}).then(()=>{this.visible=!0,this.openAnimationRef?.remove(),this.openAnimationRef=null})}close(){return new Promise(a=>{this.openTimeoutId&&(clearTimeout(this.openTimeoutId),this.openTimeoutId=null),this.closeTimeoutId=setTimeout(()=>{this.opened&&this._onClose.emit(null,{bubbles:!1}),this.opened=!1,this.ariaHidden="true",this.ariaLive="off",this.closeTimeoutId=null,this.cleanupUpdateListeners?.(),this.cleanupUpdateListeners=null,this.tooltipElem?(this.openAnimationRef?.pause(),this.closeAnimationRef?.remove(),this.closeAnimationRef=m({targets:this.tooltipElem,...u(this.renderedPosition,{fallbackPosition:this.position,fallbackPlacement:this.placement,action:"close",scaleX:.9}),opacity:{value:[1,0],easing:"linear",duration:this.animationDuration/2},easing:"easeOutElastic",duration:this.animationDuration,complete:()=>{a()}})):a()},this.closeDelay)}).then(()=>{this.visible=!1,this.tooltipElem.style.display="",this.closeAnimationRef?.remove(),this.closeAnimationRef=null,this.portalController.removeFromStack()})}updateLabelAssumption(){this.withoutA11y||(this.assumeLabel=!this.withoutAutoLabel&&N.includes(this.targetElement?.tagName)&&!this.targetElement.getAttribute("aria-label")&&!this.targetElement.getAttribute("aria-labelledby"),this.opened&&(this.ariaHidden=this.asAriaLabel||this.assumeLabel?"true":"false",this.ariaLive=this.asAriaLabel||this.assumeLabel?"off":"polite"))}updateTargetAriaIds(){this.withoutA11y||(this.updateLabelAssumption(),this.asAriaLabel||this.assumeLabel?(this.targetElement?.getAttribute("aria-labelledby")||this.targetElement?.setAttribute("aria-labelledby",this.id),this.targetElement?.getAttribute("aria-describedby")&&this.targetElement?.removeAttribute("aria-describedby")):(this.targetElement?.getAttribute("aria-describedby")||this.targetElement?.setAttribute("aria-describedby",this.id),this.targetElement?.getAttribute("aria-labelledby")&&this.targetElement?.removeAttribute("aria-labelledby")))}render(){return H`${this.instanceStyles}<div part="tooltip" class="tooltip"><slot></slot><div part="arrow" class="arrow"></div></div>`}};t.styles=[_,S];e([i({reflect:!0})],t.prototype,"id",2);e([i()],t.prototype,"position",2);e([i()],t.prototype,"placement",2);e([i({type:Number,reflect:!0})],t.prototype,"openDelay",2);e([i({type:Number,reflect:!0})],t.prototype,"closeDelay",2);e([i({reflect:!0})],t.prototype,"role",2);e([i({attribute:"aria-hidden",reflect:!0})],t.prototype,"ariaHidden",2);e([i({attribute:"aria-live",reflect:!0})],t.prototype,"ariaLive",2);e([i({reflect:!0})],t.prototype,"triggerOn",2);e([i({type:Boolean,reflect:!0})],t.prototype,"withoutPortal",2);e([i({type:Number})],t.prototype,"animationDuration",2);e([i({type:Boolean,reflect:!0})],t.prototype,"asAriaLabel",2);e([i({type:Boolean,reflect:!0})],t.prototype,"withoutAutoLabel",2);e([s()],t.prototype,"opened",2);e([s()],t.prototype,"assumeLabel",2);e([i({type:Object})],t.prototype,"targetElement",2);e([i()],t.prototype,"portalAdapter",2);e([i({type:Boolean})],t.prototype,"withoutA11y",2);e([r()],t.prototype,"_onOpen",2);e([r()],t.prototype,"_onClose",2);e([r()],t.prototype,"_onTriggerChange",2);e([s()],t.prototype,"visible",2);e([s()],t.prototype,"renderedPosition",2);e([c(".tooltip")],t.prototype,"tooltipElem",2);e([c(".arrow")],t.prototype,"arrowElem",2);e([o("withoutAutoLabel")],t.prototype,"handleAutoLabelChange",1);e([o("triggerOn")],t.prototype,"handleTriggerOnChange",1);e([o(["id","targetElement","asAriaLabel"],{waitUntilFirstUpdate:!0})],t.prototype,"handleA11yChange",1);e([o("disabled",{waitUntilFirstUpdate:!0})],t.prototype,"handleDisabledChange",1);e([o(["position","placement","sp","se"],{waitUntilFirstUpdate:!0})],t.prototype,"handlePositionChange",1);t=e([z("mte-tooltip")],t);export{t as MteTooltip};
